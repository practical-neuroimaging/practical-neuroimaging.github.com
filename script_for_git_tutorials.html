<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Course on Practical Neuroimaging in Python &mdash; Practical neuroimaging analysis</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Practical neuroimaging analysis" href="index.html" />
    <link rel="next" title="Slice timing correction" href="slice_timing.html" />
    <link rel="prev" title="Practical neuroimaging, the sequel" href="schedule_2015.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="slice_timing.html" title="Slice timing correction"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="schedule_2015.html" title="Practical neuroimaging, the sequel"
             accesskey="P">previous</a> |</li>
<big><big><big><li><a href="index.html">Home</a> |&nbsp;</li>
  <li><a href="https://github.com/practical-neuroimaging/pna2015">Exercises</a> |&nbsp;</li>
  <li><a href="https://calmail.berkeley.edu/manage/list/listinfo/practical_fmri@lists.berkeley.edu">Mailing list</a> |&nbsp;</li></big></big></big>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="script-for-git-tutorial-screencasts">
<h1>Script for git tutorial screencasts<a class="headerlink" href="#script-for-git-tutorial-screencasts" title="Permalink to this headline">¶</a></h1>
<p>These are the scripts I used for two short screencasts introducing git.</p>
<ul class="simple">
<li><a class="reference external" href="https://vimeo.com/121579300">https://vimeo.com/121579300</a></li>
<li><a class="reference external" href="https://vimeo.com/121579601">https://vimeo.com/121579601</a></li>
</ul>
<div class="section" id="script-for-introduction-to-git-repository">
<h2>Script for introduction to git repository<a class="headerlink" href="#script-for-introduction-to-git-repository" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://vimeo.com/121579300">https://vimeo.com/121579300</a></li>
</ul>
<p>In the terms of the <a class="reference external" href="http://tom.preston-werner.com/2009/05/19/the-git-parable.html">git parable</a>, snapshot is the same thing as a commit.</p>
<p><a class="reference external" href="http://practical-neuroimaging.github.io/git_parable.html">Our own version of the git parable</a></p>
<div class="highlight-python"><div class="highlight"><pre>git config --global user.name &quot;Matthew Brett&quot;
git config --global user.email &quot;matthew.brett@gmail.com&quot;
</pre></div>
</div>
<p>Change to home directory:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ~
</pre></div>
</div>
<p>A git repository consists of a working directory (or working tree) with a
hidden subdirectory containing the files that git uses to store and track
snapshots.</p>
<p>First make the working directory:</p>
<div class="highlight-python"><div class="highlight"><pre>mkdir thrilling_paper
cd thrilling paper
</pre></div>
</div>
<p>This is our working directory.</p>
<p>There are no files in the directory at the moment.</p>
<p>Let&#8217;s start the paper:</p>
<div class="highlight-python"><div class="highlight"><pre>vim nobel_prize.txt
</pre></div>
</div>
<p>then:</p>
<div class="highlight-python"><div class="highlight"><pre>How the brain works
-------------------

It sends electrical messages around and that adds up to everything.
</pre></div>
</div>
<p>Let&#8217;s make an analysis script as well:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">random</span>

<span class="n">the_number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="k">while</span> <span class="n">the_number</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Oops, try again&quot;</span><span class="p">)</span>
    <span class="n">the_number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;The answer is&quot;</span><span class="p">,</span> <span class="n">the_number</span><span class="p">)</span>
</pre></div>
</div>
<p>Now let&#8217;s say we&#8217;re ready to start making snapshots with git.</p>
<p>First we make a git repository to store the snapshots and history:</p>
<div class="highlight-python"><div class="highlight"><pre>git init
ls
</pre></div>
</div>
<p>The directory <cite>.git</cite> is hidden:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ls</span> <span class="o">-</span><span class="n">a</span>
<span class="n">ls</span> <span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>The directory has various things in it.</p>
<p>In fact we will find that the <cite>refs</cite> directory will store the bookmarks for
our branches and tags, and the <cite>objects</cite> directory will store our file and
directory snapshots.</p>
<p>We haven&#8217;t taken any snapshots yet, so there is nothing in the objects
directory:</p>
<div class="highlight-python"><div class="highlight"><pre>ls .git/objects

git status
</pre></div>
</div>
<p>Notice that the files are &#8216;untracked&#8217;.  That means that git has never
previously taken a snapshot of these files, and so far assumes they should not
go into our snapshots.</p>
<p>As you remember from the git parable, before we do a snapshot, we first put
the stuff that will go into the snapshot, into the staging area.   We do that
with <code class="docutils literal"><span class="pre">git</span> <span class="pre">add</span></code>.</p>
<p>Now let&#8217;s add nobel_prize.txt to the staging area:</p>
<div class="highlight-python"><div class="highlight"><pre>git add nobel_prize.txt
</pre></div>
</div>
<p>What just happened?  First, we can see that a snapshot of <cite>nobel_prize.txt</cite> has
gone into the staging area:</p>
<div class="highlight-python"><div class="highlight"><pre>git status
</pre></div>
</div>
<p>Second, behind the scenes, git has made a copy of the file and put it into its
objects directory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ls</span> <span class="o">.</span><span class="n">git</span><span class="o">/</span><span class="n">objects</span>
</pre></div>
</div>
<p>The file has a filename that comes from its hash.  Don&#8217;t worry about that for
now.  We can even get git to fetch this stored copy of <cite>nobel_prize.txt</cite> for
us, with git show.  Don&#8217;t worry about the details of this command:</p>
<div class="highlight-python"><div class="highlight"><pre>git show :nobel_prize.txt
</pre></div>
</div>
<p>This is the snapshot of the file that has gone into the staging area.</p>
<p>If we now change the file in the working tree, it will be different from the
snapshot version.</p>
<p>Edit nobel_prize.txt:</p>
<div class="highlight-python"><div class="highlight"><pre>I have discovered the electrical impulses in the brain change when I think
about being famous.
</pre></div>
</div>
<p>The copy of nobel_prize.txt in the working directory contains a new sentence.
But the snapshot stored copy is the same as it was when we took the snapshot:</p>
<div class="highlight-python"><div class="highlight"><pre>git show :nobel_prize.txt
</pre></div>
</div>
<p>Now what happens when I do a git status?:</p>
<div class="highlight-python"><div class="highlight"><pre>git status
</pre></div>
</div>
<p>The green shows the initial snapshot I did of this file, into the staging
area.  The red &#8216;not staged for commit&#8217; shows that the file that is in the
working tree is different from the file in the staging area.  The redness of
the red text is warning me that I may want to update my copy in the staging
area.  I&#8217;ll do that now:</p>
<div class="highlight-python"><div class="highlight"><pre>git add nobel_prize.txt

git status
</pre></div>
</div>
<p>Notice that I now have two files in the objects directory - these correspond
to the first snapshot I made of <code class="docutils literal"><span class="pre">nobel_prize.txt</span></code> and the second that I just
made.  This reminds us that git is very careful to make use we don&#8217;t
accidentally lose our backups.   Even though we probably don&#8217;t care about the
first version of the file, git will keep it for us for a month or so, in the
&#8216;objects&#8217; directory, in case we want it.  Eventually though, git will do a
housekeeping clearout, and that backup will disappear, unless it is part of
any of the full snapshots (commits) that will come on to soon.</p>
<p>Now I will also add <cite>analysis_script.txt</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre>git add analysis_script.txt
git status
</pre></div>
</div>
<p>So now both files are in the staging area, and the versions in the staging
area are the same as the versions in the working tree.</p>
<p>Of course we now have another file in .git/objects because there is now a
snapshot of analysis_script there.</p>
<p>Notice that git tells us that that these changes in the staging area are ready
to be committed.</p>
<p>A commit, as we remember, is one recorded state of the working tree - a
snapshot of the working tree.</p>
<p>Let&#8217;s do the commit.</p>
<p>I&#8217;m first going to do the commit as I would normally do it:</p>
<div class="highlight-python"><div class="highlight"><pre>git commit
</pre></div>
</div>
<p>Git opened my text editor for me and shows me some helpful information about
what is going into this commit.</p>
<p>I then type a message about this commit to remind me (and any else looking at
this later) what this commit is for.</p>
<p>Then git will save this message with the record of this snapshot, along with
my name and email address, from the configuration we did at the start of this
video.</p>
<p>But in this case, I&#8217;m not going to do what I normally do, and I&#8217;m going to
close this without saving.</p>
<p>I&#8217;m doing this so you can follow along.  When you first get started with git,
you may not have your favorite text editor set up to work with git, and so you
may get an error or some confusing text editor opening up to type the message.
You will then need to set up your text editor properly.  Google is your
friend.</p>
<p>So, just to show you how it works, if your text editor isn&#8217;t set up right,
I&#8217;ll use the <cite>-m</cite> flag to pass the message, so git doesn&#8217;t open the editor:</p>
<div class="highlight-python"><div class="highlight"><pre>git commit -m &quot;First snapshot of my files&quot;
</pre></div>
</div>
<p>Git helpfully tells us what went into the snapshot.</p>
<p>Now I can look at the short history of the project:</p>
<div class="highlight-python"><div class="highlight"><pre>git log
</pre></div>
</div>
</div>
<div class="section" id="script-for-video-on-git-history-and-git-branches">
<h2>Script for video on git history and git branches<a class="headerlink" href="#script-for-video-on-git-history-and-git-branches" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://vimeo.com/121579601">https://vimeo.com/121579601</a></li>
</ul>
<p>The next step in understanding git is understanding how git connects commits
together with the commit parents, and how git stores branches and tags as
bookmarks.</p>
<p>First let&#8217;s look at branches.</p>
<p>You can see from the commit message that git seems to be on a &#8220;branch&#8221; called
&#8220;master&#8221;.</p>
<p>&#8220;master&#8221; is the default branch, the branch that git creates by default.</p>
<p>We can see which branch we are on using <code class="docutils literal"><span class="pre">git</span> <span class="pre">branch</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>git branch
</pre></div>
</div>
<p>At the moment we only have one branch &#8220;master&#8221;</p>
<p>As we saw in the git parable, a &#8220;branch&#8221; is just a label that points to a
particular snapshot.  Remember a snapshot is a &#8220;commit&#8221; in git terminology.</p>
<p>Remember that git log showed us the identifier for the commit - the commit
hash:</p>
<div class="highlight-python"><div class="highlight"><pre>git log
</pre></div>
</div>
<p>We can also see which commit the branch is pointing at by using the <code class="docutils literal"><span class="pre">-v</span></code>
flag:</p>
<div class="highlight-python"><div class="highlight"><pre>git branch -v
</pre></div>
</div>
<p>As you can see the output tells us that the &#8220;master&#8221; branch is pointing to the
git commit that starts with &#8216;d839074&#8217; - the same hash reported by git log.</p>
<p>In the git parable, we stored the branch positions in a text file, and git
does something very similar.  Git records the current position of each branch
in a tiny text file in the <code class="docutils literal"><span class="pre">.git/refs/heads</span></code> directory.  Here is the current
contents of <code class="docutils literal"><span class="pre">.git/refs/heads/master</span></code> - the current position of the master
branch:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cat</span> <span class="o">.</span><span class="n">git</span><span class="o">/</span><span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/</span><span class="n">master</span>
</pre></div>
</div>
<p>As you can see it points to the commit (snapshot) hash we see in the output
from <code class="docutils literal"><span class="pre">git</span> <span class="pre">log</span></code> and from <code class="docutils literal"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">-v</span></code>.</p>
<p>Now let&#8217;s make a new commit.</p>
<p>I&#8217;ll now make some edits to <code class="docutils literal"><span class="pre">nobel_prize.txt</span></code>. First I delete the last
sentence.  Now I add:</p>
<div class="highlight-python"><div class="highlight"><pre>I am starting to feel famous while I write this paper.
</pre></div>
</div>
<p>I do git status to show me what has changed between the working tree and the
staging area:</p>
<div class="highlight-python"><div class="highlight"><pre>git status
</pre></div>
</div>
<p>Sure enough, the <code class="docutils literal"><span class="pre">nobel_prize.txt</span></code> paper has new changes that the staging
area does not know about.</p>
<p>Remember that the staging area always starts off the contents of the last
commit.</p>
<p>In fact, we can ask git to tell us exactly what changes there are in the
working tree, compared to the staging area, with the <code class="docutils literal"><span class="pre">git</span> <span class="pre">diff</span></code> command:</p>
<div class="highlight-python"><div class="highlight"><pre>git diff
</pre></div>
</div>
<p>Git diff only works well on simple text files like the files in our working
tree.  The new lines are in green with a plus.  Any deleted lines are in red
with a minus sign preceding.</p>
<p>OK - I am happy to add these changes to the staging area for the new commit:</p>
<div class="highlight-python"><div class="highlight"><pre>git add nobel_prize.txt
git status
</pre></div>
</div>
<p>All seems ready.</p>
<p>Let&#8217;s make the new commit:</p>
<div class="highlight-python"><div class="highlight"><pre>git commit -m &quot;More inspiring thoughts&quot;
</pre></div>
</div>
<p>Let&#8217;s look at the history of our project now:</p>
<div class="highlight-python"><div class="highlight"><pre>git log
</pre></div>
</div>
<p>The project has two commits, the commit we have just done, and the first
commit.</p>
<p>The first line for each commit gives the SHA1 hash (unique identifier) for
this commit.</p>
<p>Our new commit points back to the first commit to record the history, that
our latest commit follows on from the first commit.</p>
<p>We can see that by using the <code class="docutils literal"><span class="pre">--parents</span></code> flag to git log:</p>
<div class="highlight-python"><div class="highlight"><pre>git log --parents
</pre></div>
</div>
<p>We still have the hash of our commit at the beginning of the first line.
After that, for our second commit, we have the &#8220;parent&#8221; of this commit.  The
parent is the first commit.  You can see the parent of the second commit is
the same as the hash for the first commit.  This is how git records the line
of history between the commits.</p>
<p>How about the branch?  Remember that the position of the branch should move
when we make a commit.  The branch position moves from pointing to the
previous commit, to point to the current commit.  As we remember, the current
commit is:</p>
<div class="highlight-python"><div class="highlight"><pre>git log
</pre></div>
</div>
<p>Here is the position of the &#8216;master&#8217; branch now:</p>
<div class="highlight-python"><div class="highlight"><pre>git branch -v
</pre></div>
</div>
<p>You can see that the branch position has moved to point to the latest commit.</p>
<p>You won&#8217;t be surprised to see that git stored this information in the
<code class="docutils literal"><span class="pre">.git/refs/heads/master</span></code> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cat</span> <span class="o">.</span><span class="n">git</span><span class="o">/</span><span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/</span><span class="n">master</span>
</pre></div>
</div>
<p>You now know most of the important things you need to know to understand git.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Script for git tutorial screencasts</a><ul>
<li><a class="reference internal" href="#script-for-introduction-to-git-repository">Script for introduction to git repository</a></li>
<li><a class="reference internal" href="#script-for-video-on-git-history-and-git-branches">Script for video on git history and git branches</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="schedule_2015.html"
                        title="previous chapter">Practical neuroimaging, the sequel</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="slice_timing.html"
                        title="next chapter">Slice timing correction</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/script_for_git_tutorials.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="slice_timing.html" title="Slice timing correction"
             >next</a> |</li>
        <li class="right" >
          <a href="schedule_2015.html" title="Practical neuroimaging, the sequel"
             >previous</a> |</li>
<big><big><big><li><a href="index.html">Home</a> |&nbsp;</li>
  <li><a href="https://github.com/practical-neuroimaging/pna2015">Exercises</a> |&nbsp;</li>
  <li><a href="https://calmail.berkeley.edu/manage/list/listinfo/practical_fmri@lists.berkeley.edu">Mailing list</a> |&nbsp;</li></big></big></big>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2013-2015, Matthew Brett and J-B Poline.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>